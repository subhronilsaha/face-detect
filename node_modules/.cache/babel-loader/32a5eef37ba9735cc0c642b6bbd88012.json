{"ast":null,"code":"import _classCallCheck from\"/Users/subhronilsaha/Desktop/face-detect/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/subhronilsaha/Desktop/face-detect/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/subhronilsaha/Desktop/face-detect/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/subhronilsaha/Desktop/face-detect/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/subhronilsaha/Desktop/face-detect/node_modules/@babel/runtime/helpers/esm/inherits\";import React from'react';import Clarifai from'clarifai';import Container from'react-bootstrap/Container';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import Navigation from'./Components/Navigation';import SignIn from'./Components/Sign In/SignIn';import Register from'./Components/Register/Register';import UserScore from'./Components/UserScore';import ImageLinkForm from'./Components/ImageLinkForm/ImageLinkForm';import FaceRecognition from'./Components/Face Recognition/FaceRecognition';import bgImg from'./assets/bg-img.jpg';import'bootstrap/dist/css/bootstrap.min.css';import'./App.css';var app=new Clarifai.App({apiKey:'edde4e65d57d4ae5b35aeab79b52cfb1'});var App=/*#__PURE__*/function(_React$Component){_inherits(App,_React$Component);function App(){var _this;_classCallCheck(this,App);_this=_possibleConstructorReturn(this,_getPrototypeOf(App).call(this));_this.onInputChange=function(event){_this.setState({input:event.target.value});};_this.calculateNumberOfFaces=function(data){var numberOfFaces=data.outputs[0].data.regions.length;_this.setState({faces:numberOfFaces});console.log(numberOfFaces);return numberOfFaces;};_this.calculateFaceLocation=function(data,index){var clarafaiFace=data.outputs[0].data.regions[index].region_info.bounding_box;var image=document.getElementById('inputImage');var imageWidth=Number(image.width);var imageHeight=Number(image.height);console.log(imageHeight,imageWidth);return{leftCol:clarafaiFace.left_col*imageWidth,topRow:clarafaiFace.top_row*imageHeight,rightCol:imageWidth-clarafaiFace.right_col*imageWidth,bottomRow:imageHeight-clarafaiFace.bottom_row*imageHeight};};_this.onButtonSubmit=function(){_this.setState({imageUrl:_this.state.input});app.models.predict(Clarifai.FACE_DETECT_MODEL,_this.state.input).then(function(response){var numberOfFaces=_this.calculateNumberOfFaces(response);var boxes=[];var i;for(i=0;i<numberOfFaces;i++){var box=_this.calculateFaceLocation(response,i);boxes.push(box);console.log(boxes);}_this.setState({boxes:boxes});}).catch(function(err){return console.log(err);});};_this.onRouteChange=function(route){_this.setState({route:route});};_this.onNameSubmit=function(event){_this.setState({name:event.target.value});};_this.state={input:'',imageUrl:'',boxes:[],route:'signin',faces:0,name:''};return _this;}_createClass(App,[{key:\"render\",value:function render(){var HomePageStyle={padding:\"0 50px 60px 50px\",minHeight:\"100vh\",background:\"rgba(19, 19, 19, 0.7)\"};return React.createElement(\"div\",{className:\"App\"},React.createElement(Container,{fluid:\"true\",style:{margin:0,padding:0}},React.createElement(Navigation,{onRouteChange:this.onRouteChange}),React.createElement(\"div\",{style:{position:\"absolute\",top:0,left:0}},React.createElement(\"img\",{src:bgImg,alt:\"\",className:\"background-img\"})),this.state.route==='home'?React.createElement(Container,null,React.createElement(Row,{style:HomePageStyle},React.createElement(Col,{xs:12,sm:6},React.createElement(UserScore,{name:this.state.name,faces:this.state.faces}),React.createElement(ImageLinkForm,{onInputChange:this.onInputChange,onButtonSubmit:this.onButtonSubmit})),React.createElement(Col,{style:{alignItems:\"center\"},xs:12,sm:6},React.createElement(\"div\",null,React.createElement(\"img\",{id:\"inputImage\",className:\"image-received\",alt:\"\",src:this.state.imageUrl}),this.state.boxes.map(function(box,index){return React.createElement(FaceRecognition,{box:box,key:index});}))))):this.state.route==='signin'?React.createElement(SignIn,{onRouteChange:this.onRouteChange}):React.createElement(Register,{onRouteChange:this.onRouteChange,onNameSubmit:this.onNameSubmit})));}}]);return App;}(React.Component);export default App;","map":{"version":3,"sources":["/Users/subhronilsaha/Desktop/face-detect/src/App.js"],"names":["React","Clarifai","Container","Row","Col","Navigation","SignIn","Register","UserScore","ImageLinkForm","FaceRecognition","bgImg","app","App","apiKey","onInputChange","event","setState","input","target","value","calculateNumberOfFaces","data","numberOfFaces","outputs","regions","length","faces","console","log","calculateFaceLocation","index","clarafaiFace","region_info","bounding_box","image","document","getElementById","imageWidth","Number","width","imageHeight","height","leftCol","left_col","topRow","top_row","rightCol","right_col","bottomRow","bottom_row","onButtonSubmit","imageUrl","state","models","predict","FACE_DETECT_MODEL","then","response","boxes","i","box","push","catch","err","onRouteChange","route","onNameSubmit","name","HomePageStyle","padding","minHeight","background","margin","position","top","left","alignItems","map","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Clarifai from 'clarifai';\nimport Container from 'react-bootstrap/Container';\nimport Row from 'react-bootstrap/Row';\nimport Col from 'react-bootstrap/Col';\nimport Navigation from './Components/Navigation';\nimport SignIn from './Components/Sign In/SignIn';\nimport Register from './Components/Register/Register';\nimport UserScore from './Components/UserScore';\nimport ImageLinkForm from './Components/ImageLinkForm/ImageLinkForm';\nimport FaceRecognition from './Components/Face Recognition/FaceRecognition';\nimport bgImg from './assets/bg-img.jpg';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport './App.css';\n\nconst app = new Clarifai.App({\n  apiKey: 'edde4e65d57d4ae5b35aeab79b52cfb1'\n});\n\nclass App extends React.Component {\n  constructor() {\n    super();\n    this.state = {\n      input: '',\n      imageUrl: '',\n      boxes: [], \n      route: 'signin', \n      faces: 0, \n      name: ''\n    }\n  }\n\n  onInputChange = (event) => {\n    this.setState({input: event.target.value});\n  }\n\n  calculateNumberOfFaces = (data) => {\n    const numberOfFaces = data.outputs[0].data.regions.length;\n    this.setState({ faces: numberOfFaces });\n    console.log(numberOfFaces);\n    return numberOfFaces;\n  }\n\n  calculateFaceLocation = (data, index) => {\n    const clarafaiFace = data.outputs[0].data.regions[index].region_info.bounding_box;\n    const image = document.getElementById('inputImage');\n    const imageWidth = Number(image.width);\n    const imageHeight = Number(image.height);\n    console.log(imageHeight, imageWidth);\n\n    return {\n      leftCol: clarafaiFace.left_col * imageWidth,\n      topRow: clarafaiFace.top_row * imageHeight,\n      rightCol: imageWidth - (clarafaiFace.right_col * imageWidth),\n      bottomRow: imageHeight - (clarafaiFace.bottom_row * imageHeight)\n    }\n  }\n\n  onButtonSubmit = () => {\n    this.setState({imageUrl: this.state.input})\n    app.models\n      .predict(\n        Clarifai.FACE_DETECT_MODEL, \n        this.state.input\n      )\n      .then(response => {\n        const numberOfFaces = this.calculateNumberOfFaces(response);\n        var boxes = [];\n        var i;\n        for(i = 0; i<numberOfFaces; i++) {\n          const box = this.calculateFaceLocation(response, i);\n          boxes.push(box);\n          console.log(boxes);\n        }\n        this.setState({ boxes: boxes });\n      })\n      .catch((err) => console.log(err));  \n  }\n\n  onRouteChange = (route) => {\n    this.setState({ route: route });\n  }\n\n  onNameSubmit = (event) => {\n    this.setState({ name: event.target.value });\n  }\n\n  render() {\n    const HomePageStyle = { \n      padding: \"0 50px 60px 50px\",\n      minHeight: \"100vh\",\n      background: \"rgba(19, 19, 19, 0.7)\" \n    }\n\n    return (\n      <div className=\"App\">\n        <Container fluid=\"true\" style={{margin: 0, padding: 0}}>\n          <Navigation onRouteChange={this.onRouteChange} />\n          <div style={{position: \"absolute\", top: 0, left: 0}}>\n            <img src={bgImg} alt=\"\" className=\"background-img\" />\n          </div>\n\n          {this.state.route === 'home' \n              ? <Container> \n                <Row style={HomePageStyle}>\n                  <Col xs={12} sm={6}>\n                    <UserScore \n                      name={ this.state.name }\n                      faces={ this.state.faces } \n                    />\n                    <ImageLinkForm \n                      onInputChange={ this.onInputChange } \n                      onButtonSubmit={ this.onButtonSubmit } \n                    />\n                  </Col>\n                  <Col style={{ alignItems: \"center\" }} xs={12} sm={6}>\n                    <div>\n                      <img \n                        id=\"inputImage\" \n                        className=\"image-received\"\n                        alt='' src={this.state.imageUrl}\n                      />\n                      {this.state.boxes.map((box, index) => {\n                        return (\n                          <FaceRecognition \n                            box={box} \n                            key={index}\n                          /> \n                        )\n                      })}\n                    </div>\n                  </Col>\n                </Row>\n              </Container>\n\n            : (this.state.route === 'signin' \n                ? <SignIn \n                    onRouteChange={ this.onRouteChange } \n                  />\n                : <Register \n                    onRouteChange={ this.onRouteChange } \n                    onNameSubmit={ this.onNameSubmit } \n                  />)\n          }\n        </Container>\n      </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}